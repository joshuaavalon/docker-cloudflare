{
  "title": "Config",
  "$id": "https://joshuaavalon.github.io/docker-cloudflare/config.schema.json",
  "$schema": "http://json-schema.org/draft-07/schema#",
  "description": "Configuration for docker-cloudflare",
  "additionalProperties": false,
  "type": "object",
  "properties": {
    "api": {
      "description": "Cloudflare V4 API url. Default to \"https://api.cloudflare.com/client/v4/\".",
      "default": "https://api.cloudflare.com/client/v4/",
      "type": "string"
    },
    "timeout": {
      "default": 5000,
      "type": "number"
    },
    "auth": {
      "title": "ScopedAuth",
      "description": "Authentication used to interact with API.",
      "additionalProperties": false,
      "type": "object",
      "properties": {
        "scopedToken": {
          "description": "API Token generated from the User Profile 'API Tokens' page.",
          "type": "string"
        }
      },
      "required": [
        "scopedToken"
      ]
    },
    "domains": {
      "description": "List of domains to be updated.",
      "type": "array",
      "items": {
        "title": "Domain",
        "description": "Domain name that needed to be update",
        "additionalProperties": false,
        "type": "object",
        "properties": {
          "name": {
            "description": "Domain name that to be updated.",
            "type": "string"
          },
          "type": {
            "type": "string",
            "description": "Dns record type. Default to A.",
            "default": "A",
            "enum": [
              "A",
              "AAAA"
            ]
          },
          "proxied": {
            "description": "Whether the record is receiving the performance and security benefits of Cloudflare. Default to true.",
            "default": true,
            "type": "boolean"
          },
          "create": {
            "description": "Create record if it does not exits. Default to false.",
            "default": false,
            "type": "boolean"
          },
          "zoneId": {
            "description": "Zone ID of the domain to be updated.",
            "type": "string"
          },
          "zoneName": {
            "description": "Base domain of the domain to be updated.",
            "type": "string"
          },
          "webhook": {
            "title": "Webhook",
            "description": "Fired during the update.",
            "additionalProperties": false,
            "type": "object",
            "properties": {
              "run": {
                "description": "Fired before update run.",
                "type": "string"
              },
              "success": {
                "description": "Fired after update success.",
                "type": "string"
              },
              "failure": {
                "description": "Fired after update failure.",
                "type": "string"
              },
              "formatter": {
                "instanceof": "function",
                "description": "Format message"
              }
            }
          }
        },
        "required": [
          "name",
          "type",
          "proxied",
          "create"
        ]
      }
    },
    "ipv4": {
      "description": "List of IP echo service that returns IPv4.",
      "default": [
        {
          "type": "ini",
          "url": "https://1.1.1.1/cdn-cgi/trace",
          "field": "ip"
        },
        {
          "type": "json",
          "url": "https://api.ipify.org?format=json",
          "fields": [
            "ip"
          ]
        }
      ],
      "type": "array",
      "items": {
        "title": "IpEcho",
        "description": "IP echo service",
        "type": "object",
        "properties": {
          "type": {
            "description": "Name or alias of an IP echo parser.",
            "type": "string"
          },
          "url": {
            "description": "Url of the IP echo service.",
            "type": "string"
          }
        },
        "required": [
          "type",
          "url"
        ]
      }
    },
    "ipv6": {
      "description": "List of IP echo service that returns IPv6.",
      "default": [
        {
          "type": "ini",
          "url": "https://[2606:4700:4700::1111]/cdn-cgi/trace",
          "field": "ip"
        },
        {
          "type": "json",
          "url": "https://api6.ipify.org?format=json",
          "fields": [
            "ip"
          ]
        }
      ],
      "type": "array",
      "items": {
        "title": "IpEcho",
        "description": "IP echo service",
        "type": "object",
        "properties": {
          "type": {
            "description": "Name or alias of an IP echo parser.",
            "type": "string"
          },
          "url": {
            "description": "Url of the IP echo service.",
            "type": "string"
          }
        },
        "required": [
          "type",
          "url"
        ]
      }
    },
    "echoParsers": {
      "description": "List of IP echo parsers that parses the response from IP echoing service.",
      "default": [
        {
          "resolve": "@cloudflare-ddns/ip-echo-parser-ini",
          "alias": "ini"
        },
        {
          "resolve": "@cloudflare-ddns/ip-echo-parser-json",
          "alias": "json"
        },
        {
          "resolve": "@cloudflare-ddns/ip-echo-parser-text",
          "alias": "text"
        }
      ],
      "type": "array",
      "items": {
        "title": "IpEchoParser",
        "description": "Parser that parses the response from IP echoing service.",
        "additionalProperties": false,
        "type": "object",
        "properties": {
          "resolve": {
            "description": "Name of the JavaScript package.",
            "type": "string"
          },
          "alias": {
            "description": "Alias of the JavaScript package. Must be unique from other parsers' alias and name.",
            "type": "string"
          }
        },
        "required": [
          "resolve"
        ]
      }
    }
  },
  "required": [
    "api",
    "timeout",
    "auth",
    "domains",
    "ipv4",
    "ipv6",
    "echoParsers"
  ]
}